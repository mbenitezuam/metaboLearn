function ErrorBoundary(props) {
  try {
    return props.children;
  } catch (error) {
    console.error('Error in ErrorBoundary:', error);
    return React.createElement('div', {
      className: 'min-h-screen flex items-center justify-center'
    }, React.createElement('div', {
      className: 'text-center text-red-600'
    }, 'Algo salió mal. Por favor recarga la página.'));
  }
}

function App() {
  const [showWelcome, setShowWelcome] = React.useState(true);
  const [currentView, setCurrentView] = React.useState('pathways');
  const [selectedPathway, setSelectedPathway] = React.useState(null);

  const handleContinue = () => {
    setShowWelcome(false);
  };

  const handleViewChange = (view) => {
    setCurrentView(view);
  };

  const handlePathwaySelect = (pathway) => {
    setSelectedPathway(pathway);
  };

  const handleBack = () => {
    setSelectedPathway(null);
  };

  if (showWelcome) {
    const WelcomePage = window.WelcomePage;
    if (WelcomePage) {
      return React.createElement(WelcomePage, {
        onContinue: handleContinue
      });
    }
    return React.createElement('div', { 
      className: 'min-h-screen flex items-center justify-center' 
    }, 'Cargando...');
  }

  const Header = window.Header;
  const PathwayCard = window.PathwayCard;
  const PathwayDetail = window.PathwayDetail;

  return React.createElement('div', {
    className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100'
  }, [
    Header && React.createElement(Header, {
      key: 'header',
      currentView,
      onViewChange: handleViewChange
    }),
    
    React.createElement('main', {
      key: 'main',
      className: 'container mx-auto px-4 py-8'
    }, [
      currentView === 'pathways' && !selectedPathway && 
      React.createElement('div', {
        key: 'pathways-grid',
        className: 'grid md:grid-cols-2 lg:grid-cols-3 gap-6'
      }, window.pathwayData && PathwayCard ? window.pathwayData.map((pathway, index) => 
        React.createElement(PathwayCard, {
          key: pathway.id || index,
          pathway,
          onSelect: handlePathwaySelect
        })
      ) : [React.createElement('div', { key: 'loading', className: 'col-span-3 text-center' }, 'Cargando rutas metabólicas...')]),
      
      selectedPathway && PathwayDetail && React.createElement(PathwayDetail, {
        key: 'pathway-detail',
        pathway: selectedPathway,
        onBack: handleBack
      })
    ])
  ]);
}

function initApp() {
  // Check if React is properly loaded
  if (!window.isReactReady || !window.isReactReady()) {
    console.log('React not ready, retrying...');
    setTimeout(initApp, 100);
    return;
  }

  const rootElement = document.getElementById('root');
  if (!rootElement) {
    console.error('Root element not found');
    return;
  }

  try {
    // Verify React.createElement is available
    if (typeof React.createElement !== 'function') {
      throw new Error('React.createElement is not a function');
    }

    // Create app element safely
    const errorBoundary = React.createElement(ErrorBoundary, null, React.createElement(App));
    
    if (ReactDOM.createRoot && typeof ReactDOM.createRoot === 'function') {
      const root = ReactDOM.createRoot(rootElement);
      root.render(errorBoundary);
    } else if (ReactDOM.render && typeof ReactDOM.render === 'function') {
      ReactDOM.render(errorBoundary, rootElement);
    } else {
      throw new Error('No valid ReactDOM render method found');
    }
  } catch (error) {
    console.error('Render error:', error);
    rootElement.innerHTML = '<div style="padding: 20px; text-align: center; color: red;">Error al cargar la aplicación: ' + error.message + '</div>';
  }
}

// Wait for DOM and then initialize
function startApp() {
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initApp);
  } else {
    // Add small delay to ensure all scripts are loaded
    setTimeout(initApp, 200);
  }
}

startApp();

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaboLearn - Aprendizaje Interactivo de Rutas Metabólicas</title>
    <meta name="description" content="Plataforma interactiva para el aprendizaje de rutas metabólicas con casos clínicos y ejercicios prácticos">
    <meta name="keywords" content="metabolismo, bioquímica, medicina, educación, rutas metabólicas">
    <meta property="og:title" content="MetaboLearn - Aprendizaje Interactivo de Rutas Metabólicas">
    <meta property="og:description" content="Plataforma interactiva para el aprendizaje de rutas metabólicas">
    <meta name="twitter:title" content="MetaboLearn - Aprendizaje Interactivo de Rutas Metabólicas">
    <meta name="twitter:description" content="Plataforma interactiva para el aprendizaje de rutas metabólicas">
    
    <script src="https://resource.trickle.so/vendor_lib/unpkg/react@18/umd/react.production.min.js"></script>
    <script src="https://resource.trickle.so/vendor_lib/unpkg/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://resource.trickle.so/vendor_lib/unpkg/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://resource.trickle.so/vendor_lib/unpkg/lucide-static@0.516.0/font/lucide.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.9/dist/chart.umd.min.js"></script>
    
    <style type="text/tailwindcss">
        @layer components {
            .pathway-card {
                @apply bg-white rounded-xl shadow-lg border border-gray-200;
            }
            .enzyme-badge {
                @apply px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full;
            }
            .energy-negative {
                @apply text-red-600 font-semibold;
            }
            .energy-positive {
                @apply text-green-600 font-semibold;
            }
            .quiz-option {
                @apply p-3 border rounded-lg cursor-pointer transition-colors;
            }
            .quiz-correct {
                @apply border-green-500 bg-green-50 text-green-800;
            }
            .quiz-incorrect {
                @apply border-red-500 bg-red-50 text-red-800;
            }
        }
    </style>
</head>
<body>
    <div id="root">
        <div style="padding: 20px; text-align: center;">
            <div>Cargando MetaboLearn...</div>
        </div>
    </div>
    
    <script>
        // Check if React is loaded properly
        function checkReact() {
            if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
                console.error('React or ReactDOM not loaded');
                return false;
            }
            if (!React.createElement || !React.useState) {
                console.error('React functions not available');
                return false;
            }
            return true;
        }
        
        if (typeof Chart !== 'undefined') {
            window.ChartJS = Chart;
        }
        
        // Initialize globals
        window.componentLoaded = {};
        window.componentErrors = {};
        window.isReactReady = checkReact;
    </script>
    <script src="utils/pathwayData.js"></script>
    <script src="utils/clinicalCases.js"></script>
    <script type="text/babel" src="components/WelcomePage.js"></script>
    <script type="text/babel" src="components/Header.js"></script>
    <script type="text/babel" src="components/PathwayCard.js"></script>
    <script type="text/babel" src="components/PathwayMap.js"></script>
    <script type="text/babel" src="components/Quiz.js"></script>
    <script type="text/babel" src="components/CuriousFacts.js"></script>
    <script type="text/babel" src="components/ClinicalCase.js"></script>
    <script type="text/babel" src="components/CriticalThinking.js"></script>
    <script type="text/babel" src="components/NotesPanel.js"></script>
    <script type="text/babel" src="components/TimedPractice.js"></script>
    <script type="text/babel" src="components/AchievementSystem.js"></script>
    <script type="text/babel" src="components/PathwayDetail.js"></script>
    <script type="text/babel" src="app.js"></script>
</body>
</html>
